(this["webpackJsonpdodge-game"]=this["webpackJsonpdodge-game"]||[]).push([[0],{40:function(e,t,n){e.exports=n(83)},45:function(e,t,n){},66:function(e,t){},68:function(e,t){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(38),a=n.n(i),c=(n(45),r.a.createContext(),n(2));function l(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];function a(t){t.key===e&&i(!0)}var l=function(t){t.key===e&&i(!1)};return Object(o.useEffect)((function(){return window.addEventListener("keydown",a),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",l)}}),[]),r}var u=function(e,t,n){"left"===e&&n({top:t.top,left:t.left-40}),"right"===e&&n({top:t.top,left:t.left+40}),"up"===e&&n({top:t.top-40,left:t.left}),"down"===e&&n({top:t.top+40,left:t.left})},s=["up","right","down","left"],f=function(){return s[Math.floor(Math.random()*Math.floor(3))]},d=function(e){var t=e.playerPosition,n=e.collisionHappened;return r.a.createElement("div",{style:{width:40,height:40,background:n?"#e8eb34":"grey",position:"absolute",top:t.top,left:t.left,transition:"all 0.1s ease",zIndex:3,borderRadius:2}})},p=function(e){var t=e.pos;return r.a.createElement("div",{style:{width:40,height:40,background:"#eb4034",position:"absolute",top:t&&t.top,left:t&&t.left,zIndex:1,transition:"all 0.1s linear",overflow:"hidden",display:t&&"outOfView"===t.direction?"none":"",borderRadius:2}})},h=n(17),m=n.n(h),b=new m.a.Client({secret:"fnADxzwD3yACEtY2k9ayOVyOAugajEmdPXEGv8F-"}),g=m.a.query,v=n(39),w=function(){var e={top:200,left:200},t=Object(o.useRef)(null),n=Object(o.useState)(e),i=Object(c.a)(n,2),a=i[0],s=i[1],h=Object(o.useState)([]),m=Object(c.a)(h,2),w=m[0],E=m[1],y=Object(o.useState)(0),O=Object(c.a)(y,2),j=O[0],k=O[1],S=Object(o.useState)(10),A=Object(c.a)(S,2),T=A[0],x=A[1],z=Object(o.useState)(0),L=Object(c.a)(z,2),B=L[0],C=L[1],M=Object(o.useState)(!1),H=Object(c.a)(M,2),I=H[0],R=H[1],q=Object(o.useState)(0),P=Object(c.a)(q,2),V=P[0],D=P[1],G=Object(o.useState)(null),W=Object(c.a)(G,2),J=W[0],U=W[1],Y=l("ArrowLeft"),F=l("ArrowRight"),N=l("ArrowUp"),X=l("ArrowDown"),$=function(){b.query(g.Paginate(g.Match(g.Ref("indexes/getAllHighscores")))).then((function(e){var t=e.data.map((function(e){return g.Get(e)}));return b.query(t).then((function(e){return e}))})).catch((function(e){return console.error("Error: ",e.message)})).then((function(e){var t=e.map((function(e){return{name:e.data.name,score:e.data.score}})),n={name:null,score:0};t.forEach((function(e){e.score>n.score&&(n.name=e.name,n.score=e.score)})),U(n)}))};Object(o.useEffect)((function(){$()}),[]),Object(o.useEffect)((function(){var t=setTimeout((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"up"===e?{top:440+t,left:a.left,direction:e}:"right"===e?{top:a.top,left:-40-t,direction:e}:"down"===e?{top:-40-t,left:a.left,direction:e}:"left"===e?{top:a.top,left:440+t,direction:e}:void 0},t=w&&w.map((function(e){return"outOfView"===e.direction?{}:{top:"down"===e.direction?e.top+T:"up"===e.direction?e.top-T:e.top,left:"left"===e.direction?e.left-T:"right"===e.direction?e.left+T:e.left,direction:e.top>560||e.top<-160||e.left<-160||e.left>560?"outOfView":e.direction}}));if(k(j+1),j<=100&&15!==T&&x(15),150===j&&x(20),200===j&&x(25),250===j&&x(30),350===j&&x(35),400===j&&x(40),j%15===0&&j>20)if(j>100&&j%30===0){var n=e(f()),o=e(f(),119);E(t.concat(n).concat(o))}else{var r=e(f());E(t.concat(r))}else E(t)}),80);1e4===j&&(alert("YOU BEAT THE GAME"),clearTimeout(t)),I&&(clearTimeout(t),setTimeout((function(){k(0),C(null),s(e),E([]),R(!1)}),1e3))}),[w]),Object(o.useEffect)((function(){!B&&C(0);var e=setTimeout((function(){C(B+1)}),100);I&&(clearTimeout(e),(0===V||B>V)&&D(B))}),[B]),Object(o.useEffect)((function(){!j&&k(0)}),[j]),Object(o.useEffect)((function(){Y&&u("left",a,s),F&&u("right",a,s),N&&u("up",a,s),X&&u("down",a,s)}),[Y,N,F,X]),Object(o.useEffect)((function(){var e,t;e=a,t=R,w.forEach((function(n){e.left<n.left+40&&e.top<n.top+40&&e.left+40>n.left&&e.top+40>n.top&&(console.log("collision!"),t(!0))}))}),[a,w]);return r.a.createElement("div",null,r.a.createElement(d,{playerPosition:a,collisionHappened:I}),r.a.createElement("div",{style:{background:"lightgrey",height:400,width:400,paddingLeft:0,border:"black solid thin"}}),r.a.createElement("div",{style:{background:"white",zIndex:2,position:"absolute",left:400,top:0,height:400,width:300,paddingLeft:0,paddingTop:20}},"Best global score: ",r.a.createElement("div",{style:{fontWeight:"bold"}},J&&"".concat(J.name," : ").concat(J.score))),w.map((function(e,t){return r.a.createElement(p,{pos:e,key:t})})),r.a.createElement("div",{style:{position:"absolute",width:400,background:"white",zIndex:2,margin:0,fontSize:30}},r.a.createElement("div",{style:{transition:"all 0.1s linear",height:30,color:"grey",fontSize:20}},B),r.a.createElement("div",{style:{transition:"all 0.1s linear",height:50}},"Session Best: ",V),r.a.createElement("div",{style:{transition:"all 0.1s linear",height:150}},r.a.createElement("input",{type:"input",ref:t,style:{marginBottom:20}}),r.a.createElement("button",{type:"button",onClick:function(){(function(e,t){return b.query(g.Create(g.Collection("Highscore"),{data:{name:e,score:t}})).then((function(e){return e})).catch((function(e){return console.error("Error: ",e.message)}))})(t.current.value,V).then((function(e){return $()}))},disabled:V<Object(v.get)(J,"score")},"Save score"))))};n(82);var E=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(E,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.f36eb84f.chunk.js.map