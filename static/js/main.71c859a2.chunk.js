(this["webpackJsonpdodge-game"]=this["webpackJsonpdodge-game"]||[]).push([[0],{40:function(e,t,n){e.exports=n(83)},45:function(e,t,n){},66:function(e,t){},68:function(e,t){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(38),a=n.n(i),c=(n(45),r.a.createContext(),n(2));function l(e){var t=Object(o.useState)(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];function a(t){t.key===e&&i(!0)}var l=function(t){t.key===e&&i(!1)};return Object(o.useEffect)((function(){return window.addEventListener("keydown",a),window.addEventListener("keyup",l),function(){window.removeEventListener("keydown",a),window.removeEventListener("keyup",l)}}),[]),r}var u=function(e,t,n){"left"===e&&n({top:t.top,left:t.left-40}),"right"===e&&n({top:t.top,left:t.left+40}),"up"===e&&n({top:t.top-40,left:t.left}),"down"===e&&n({top:t.top+40,left:t.left})},s=["up","right","down","left"],f=function(){return s[Math.floor(Math.random()*Math.floor(3))]},d=function(e){var t=e.playerPosition,n=e.collisionHappened;return r.a.createElement("div",{style:{width:40,height:40,background:n?"#e8eb34":"grey",position:"absolute",top:t.top,left:t.left,transition:"all 0.1s ease",zIndex:3,borderRadius:2}})},p=function(e){var t=e.pos;return r.a.createElement("div",{style:{width:40,height:40,background:"#eb4034",position:"absolute",top:t&&t.top,left:t&&t.left,zIndex:1,transition:"all 0.1s linear",overflow:"hidden",display:t&&"outOfView"===t.direction?"none":"",borderRadius:2}})},m=n(17),h=n.n(m),b=new h.a.Client({secret:"fnADxzwD3yACEtY2k9ayOVyOAugajEmdPXEGv8F-"}),g=h.a.query,v=n(39),E=function(){var e={top:200,left:200},t=Object(o.useRef)(null),n=Object(o.useState)(e),i=Object(c.a)(n,2),a=i[0],s=i[1],m=Object(o.useState)([]),h=Object(c.a)(m,2),E=h[0],w=h[1],y=Object(o.useState)(0),O=Object(c.a)(y,2),j=O[0],k=O[1],S=Object(o.useState)(10),z=Object(c.a)(S,2),A=z[0],x=z[1],T=Object(o.useState)(0),L=Object(c.a)(T,2),B=L[0],C=L[1],I=Object(o.useState)(!1),M=Object(c.a)(I,2),H=M[0],R=M[1],q=Object(o.useState)(0),P=Object(c.a)(q,2),V=P[0],D=P[1],G=Object(o.useState)(null),N=Object(c.a)(G,2),W=N[0],J=N[1],U=l("ArrowLeft"),Y=l("ArrowRight"),F=l("ArrowUp"),X=l("ArrowDown"),$=function(){b.query(g.Paginate(g.Match(g.Ref("indexes/getAllHighscores")))).then((function(e){var t=e.data.map((function(e){return g.Get(e)}));return b.query(t).then((function(e){return e}))})).catch((function(e){return console.error("Error: ",e.message)})).then((function(e){var t=e.map((function(e){return{name:e.data.name,score:e.data.score}})),n={name:null,score:0};t.forEach((function(e){e.score>n.score&&(n.name=e.name,n.score=e.score)})),J(n)}))};Object(o.useEffect)((function(){$()}),[]),Object(o.useEffect)((function(){var t=setTimeout((function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"up"===e?{top:440+t,left:a.left,direction:e}:"right"===e?{top:a.top,left:-40-t,direction:e}:"down"===e?{top:-40-t,left:a.left,direction:e}:"left"===e?{top:a.top,left:440+t,direction:e}:void 0},t=E&&E.map((function(e){return"outOfView"===e.direction?{}:{top:"down"===e.direction?e.top+A:"up"===e.direction?e.top-A:e.top,left:"left"===e.direction?e.left-A:"right"===e.direction?e.left+A:e.left,direction:e.top>560||e.top<-160||e.left<-160||e.left>560?"outOfView":e.direction}}));if(k(j+1),j<=100&&15!==A&&x(15),150===j&&x(20),200===j&&x(25),250===j&&x(30),350===j&&x(35),400===j&&x(40),j%15===0&&j>20)if(j>100&&j%30===0){var n=e(f()),o=e(f(),119);w(t.concat(n).concat(o))}else{var r=e(f());w(t.concat(r))}else w(t)}),80);1e4===j&&(alert("YOU BEAT THE GAME"),clearTimeout(t)),H&&(clearTimeout(t),setTimeout((function(){k(0),C(null),s(e),w([]),R(!1)}),1e3))}),[E]),Object(o.useEffect)((function(){!B&&C(0);var e=setTimeout((function(){C(B+1)}),100);H&&(clearTimeout(e),(0===V||B>V)&&D(B))}),[B]),Object(o.useEffect)((function(){!j&&k(0)}),[j]),Object(o.useEffect)((function(){U&&u("left",a,s),Y&&u("right",a,s),F&&u("up",a,s),X&&u("down",a,s)}),[U,F,Y,X]),Object(o.useEffect)((function(){var e,t;e=a,t=R,E.forEach((function(n){e.left<n.left+40&&e.top<n.top+40&&e.left+40>n.left&&e.top+40>n.top&&(console.log("collision!"),t(!0))}))}),[a,E]);var K=function(){return V<Object(v.get)(W,"score")};return r.a.createElement("div",null,r.a.createElement(d,{playerPosition:a,collisionHappened:H}),r.a.createElement("div",{style:{background:"white",zIndex:2,height:400,width:40,position:"absolute"}}),r.a.createElement("div",{style:{background:"lightgrey",left:40,position:"absolute",height:400,width:400,paddingLeft:0,border:"black solid thin"}}),r.a.createElement("div",{style:{background:"white",zIndex:2,position:"absolute",left:440,top:0,height:400,width:300,paddingLeft:30,paddingTop:20}},"Best global score: ",r.a.createElement("div",{style:{fontWeight:"bold"}},W&&"".concat(W.name," : ").concat(W.score)),r.a.createElement("br",null),r.a.createElement("div",null,r.a.createElement("input",{type:"input",className:"form-control",ref:t,disabled:K(),style:{marginBottom:20,fontSize:20}}),r.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){(function(e,t){return b.query(g.Create(g.Collection("Highscore"),{data:{name:e,score:t}})).then((function(e){return e})).catch((function(e){return console.error("Error: ",e.message)}))})(t.current.value,V).then((function(e){return $()}))},disabled:K()},r.a.createElement("div",{style:{fontSize:20}},"Save score")))),E.map((function(e,t){return r.a.createElement(p,{pos:e,key:t})})),r.a.createElement("div",{style:{position:"absolute",width:400,background:"white",zIndex:2,margin:0,fontSize:30,top:400,left:40}},r.a.createElement("div",{style:{transition:"all 0.1s linear",height:30,color:"grey",fontSize:20}},B),r.a.createElement("div",{style:{transition:"all 0.1s linear",height:200}},r.a.createElement("p",{style:{fontSize:20}},"Session Best: ",V))))};n(82);var w=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(E,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(w,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,1,2]]]);
//# sourceMappingURL=main.71c859a2.chunk.js.map